---
import { Page, Block, Code, info } from '../../../components/DocPage.js';
import { Behavior, MDNMap } from '../../../components/Links.js';
---
<Page title="Behavior()">
  <Block>
    <p>The <strong>behavior constructor</strong> is the constructor of a class for a <Behavior />. The constructor is <em>optional</em>, but can be provided to receive props (defined through the static <code>inputProperties</code>) and the context.</p>
  </Block>
  <section>
    <h2>Syntax</h2>
    <Block reverse>
      <Code slot="code" lang="js" code={`
new Behavior(props, context);
`} />
    </Block>
    <h3>Arguments</h3>
    <dl>
      <dt>props</dt>
      <dd>A <MDNMap /> where the keys are the properties defined in <strong><Behavior hash="inputProperties">inputProperties</Behavior></strong> and the values are the custom property values within the parent sheet.</dd>
      <dt>context</dt>
      <dd>
        <p>An object containing contextual information about the use of the behavior. Context includes:</p>

        <dl class="ml-3 mt-1">
          <dt>element</dt>
          <dd>The element that the behavior is mounted on.</dd>
          <dt>wrap</dt>
          <dd>
            <p>Wraps a function so that it will be called within the behavior's instance, and rerun the <code>bind()</code> method afterwards.</p>
            <Code lang="js" code={`
class Item {
  constructor(props, { wrap }) {
    // Calling this function will
    // call bind() immediately afterwards.
    this.fn = wrap(() => {
      this.value = 'bar';
    });
  }
  bind() { /* ... */ }
}
`} />
          </dd>
          <dt>wrapAsync</dt>
          <dd>
            <p>Wraps an async sync function so that it will be called with the behavior's instance, and rerun the <code>bind()</code> method after the Promise resolves.</p>
            <Code lang="js" code={`
class UserPortal {
  constructor(props, { wrapAsync }) {
    this.fn = wrapAsync(this.getUser);
  }

  getUser() {
   return await fetch('/api/users');
  }

  bind() { /* ... */ }
}
`} />
          </dd>
        </dl>
      </dd>
    </dl>
  </section>
</Page>